<div class="page-title" data-ng-include="'navigation/breadcrumbs.html'"></div>


<div class="[ card-panel ]">
    <h4 class="[ center-align ]">Agregar usuarios</h4>
    <div class="[ row ]">
        <form name="entry_form" class="[ mt-40 ][ left-align ]" ng-submit="addUsersToProject()" data-parsley-validate>
            <div class="[ col s12 m6 l4 offset-l2 ]"> 
                <div class="input-field">
                    <input type="text" id="litobelId" ng-model="project.litobel_id" required ng-readonly="true">
                    <label for="litobelId">Clave de proyecto Litobel</label>
                </div>
            </div>
            <div class="[ col s12 m6 l4 ]"> 
                <div class="input-field">
                    <input type="text" id="projectName" ng-model="project.name" required ng-readonly="true">
                    <label for="projectName">Nombre del proyecto</label>
                </div>
            </div>
            <div class="[ clear ]"></div>
            <div class="[ col s12 m6 l4 offset-l2  ][ mt-15 ]"> 
                <select ng-model="projectManagerId">
                    <option value="" disabled selected>Project Manager</option>
                    <option ng:repeat="pm in projectManagers" value="{{pm.id}}">{{pm.first_name + ' ' + pm.last_name}}</option>
                </select>
            </div>
            <div class="[ col s12 m6 l4  ][ mt-15 ]"> 
                <select ng-model="accountExecutiveId">
                    <option value="" disabled selected>Ejecutivo de cuenta</option>
                    <option ng:repeat="ae in accountExecutives" value="{{ae.id}}">{{ae.first_name + ' ' + ae.last_name}}</option>
                </select>
            </div>
            <div class="[ clear ]"></div>
            <div class="[ col s12 ]"> 
                <input type="hidden" name="entry_type" value="unit">

                <div class="[ center-align ]">
                    <button class="[ waves-effect ][ btn ]">agregar</button>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="[ card-panel ]">
    <h4 class="[ center-align ]">Usuarios en proyecto</h4>
    <table datatable="ng" dt-options="dtProjectUsersOptions" dt-column-defs="dtProjectUsersColumn" class="row-border hover responsive">
        <thead>
            <tr>
                <th class="[ center-align ]">Nombre</th>
                <th class="[ center-align ]">Rol</th>
                <th class="[ center-align ]">Eliminar</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="u in project.users">
                <td class="[ center-align ]">{{ u.first_name }}</td>
                <td class="[ center-align ]">{{ getUserRole( u.role ) }}</td>
                <td class="[ center-align ]">
                    <a class="[ btn waves-effect red ]" href="#/add-user-to-project/{{p.id}}"><i class="[ fa fa-times ]"></i></a>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<script>
  $('[data-parsley-validate]').parsley();
</script>





