<div class="page-title" data-ng-include="'navigation/breadcrumbs.html'"></div>

<div class="[ card-panel ]">
    <h4 class="[ center-align ]">Mi inventario</h4>
    <div class="[ row ]">
        <p>Buscar un artículo en inventario:</p>
        <form ng-submit="searchItem()">
            <div class="[ col s12 m3 ][ input-field ]">
                <input id="[ keyword ]" type="text" ng-model="keyword">
                <label for="[ keyword ]">Palabras clave</label>
            </div>
            <div class="[ col s12 m3 ][ mt-10 ]" ng-show="role==1">
                <select name="project" ng-model="selectedProject">
                    <option value="" selected disabled>Proyecto</option>
                    <option value="">Todos</option>
                    <option ng:repeat="project in projects" value="{{project.id}}">{{project.name}}</option>
                </select>
            </div>
            <div class="[ col s12 m3 ][ mt-10 ]" ng-hide="role !== 1">
                <select name="pm" ng-model="selectedPM">
                    <option value="" disabled selected>Project Manager</option>
                    <option value="">Todos</option>
                    <option ng:repeat="user in projectManagers" value="{{user.id}}">{{user.first_name + '' + user.last_name}}</option>
                </select>
            </div>
            <div class="[ col s12 m3 ][ mt-10 ]" ng-hide="role !== 1">
                <select name="pm" ng-model="selectedAE">
                    <option value="" disabled selected>Ejecutivo de cuenta</option>
                    <option value="">Todos</option>
                    <option ng:repeat="user in accountExecutives" value="{{user.id}}">{{user.first_name + '' + user.last_name}}</option>
                </select>
            </div>
            <div class="[ clear ]" ></div>
            <div class="[ col s12 m3 ][ mt-10 ]" ng-hide="role !== 1">
                <select name="pm" ng-model="selectedClient" ng-hide="role !== 1">
                    <option value="" disabled selected>Clientes</option>
                    <option value="">Todos</option>
                    <option ng:repeat="user in clientContacts" value="{{user.id}}">{{user.first_name + '' + user.last_name}}</option>
                </select>
            </div>
            <div class="[ col s12 m3 ][ mt-10 ]">
                <select name="itemType" ng-model="itemType">
                    <option value="" selected disabled>Tipo de mercancía</option>
                    <option value="">Todos</option>
                    <option ng-repeat="value in ['Laptop', 'Desktop', 'Impresora', 'Celular', 'Pantalla', 'POP', 'POS', 'Promocional', 'Mobiliario', 'Perecedero', 'Alto valor']" value="{{value}}">{{value}}</option>
                </select>
            </div>
            <div class="[ col s12 m3 ][ mt-10 ]">
                <select name="project" ng-model="selectedStatus">
                    <option value="" selected disabled>Estatus</option>
                    <option value="">Todos</option>
                    <option ng:repeat="status in statuses" value="{{status.id}}">{{status.name}}</option>
                </select>
            </div>
            <div class="[ col s12 m3 ][ mt-10 ]"> 
                <select name="storageType" ng-model="storageType">
                    <option value="" disabled selected>Tipo de almacenaje</option>
                    <option value="">Todos</option>
                    <option ng-repeat="value in ['Permanente', 'Temporal', 'Donación']" value="{{value}}">{{value}}</option>
                </select>
            </div>
            <div class="[ clear ]"></div>
            <div class="[ col s12 ][ center-align  ]">
                <button class="[ waves-effect ][ btn ]"><i class="[ mdi-action-search ][ left ]"></i> Buscar</button>
            </div>
        </form>
    </div>
    <table datatable="ng" dt-options="dtOptions" dt-column-defs="dtColumnDefs" class="row-border hover">
        <thead>
            <tr>
                <th class="[ center-align ]">Tipo</th>
                <th class="[ center-align ]">Nombre</th>
                <th class="[ center-align ]">Tipo de mercancía</th>
                <th class="[ center-align ]">Estatus</th>
                <th class="[ center-align ]">Tipo de almacenaje</th>
                <th class="[ center-align ][ hide-on-small-only ]">Vigencia / Caducidad</th>
                <th class="[ center-align ]">Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="i in inventoryItems">
                <td class="[ ]"><i class="[ {{ getItemTypeIcon( i.actable_type ) }} ]"></i></td>
                <td>{{ i.name }}</td>
                <td class="[ center-align ]">{{ i.item_type }}</td>
                <td class="[ center-align ]">{{ getStatus( i.status ) }}</td>
                <td class="[ center-align ]">{{ i.storage_type }}</td>
                <td class="[ center-align ][ hide-on-small-only ]">{{ i.validity_expiration_date | date:'dd/MM/yyyy' }}</td>
                <td class="[ center-align ]">
                    <div ng-if="( i.status == 1 )">
                        <a class="[ btn waves-effect ]" href="#/view-item/{{i.id}}"><i class="[ fa fa-eye ]"></i></a>
                        <a class="[ btn waves-effect red ]" href="#/withdraw-item/{{i.id}}"><i class="[ fa fa-outdent ]"></i></a>
                    </div>
                    <div ng-if="( i.status == 3 )">
                        <a class="[ btn waves-effect ]" href="#/view-item/{{i.id}}"><i class="[ fa fa-eye ]"></i></a>
                        <a class="[ btn waves-effect green ]" href="#/re-entry/"><i class="[ fa fa-indent ]"></i></a>
                        <a class="[ btn waves-effect red ]" href="#/withdraw-item/{{i.id}}"><i class="[ fa fa-outdent ]"></i></a>
                    </div>
                    <div ng-if="( i.status == 2 )">
                        <a class="[ btn waves-effect ]" href="#/view-item/{{i.id}}"><i class="[ fa fa-eye ]"></i></a>
                        <a class="[ btn waves-effect green ]" href="#/re-entry/"><i class="[ fa fa-indent ]"></i></a>
                    </div>
                    <div ng-if="( i.status == 4 || i.status == 5 || i.status == 6  )">
                        <a class="[ btn waves-effect ]" href="#/view-item/{{i.id}}"><i class="[ fa fa-eye ]"></i></a>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>





