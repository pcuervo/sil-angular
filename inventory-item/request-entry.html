<div class="page-title" data-ng-include="'navigation/breadcrumbs.html'"></div>

<div class="[ card-panel ]">

    <h4 class="[ center-align ]">Solicitud de entrada</h4>
    <div class="[ row ]">
        <form name="entry_form" class="[ mt-40 ][ left-align ]" ng-submit="requestEntry()" data-parsley-entry>
            <div class="[ col s12 m5 offset-m1 ]" ng-if="role == 3"> 
                <p for="ae">Ejecutivo de cuenta: {{accountExecutiveName}}</p>
            </div>
            <div class="[ clear ]"></div>
            <div class="[ col s12 m5 offset-m1 ]" >
                <select name="project" ng-model="selectedProject" required data-parsley-error-message="¡El proyecto es obligatorio!" ng-change="fillProjectData()">
                    <option value="" disabled selected>Selecciona el proyecto</option>
                    <option ng:repeat="project in projects" value="{{project.id}}">{{project.name}}</option>
                </select>
            </div>
            <div class="[ col s12 m5 offset-m1 ]" ng-if="role != 3"> 
                <select name="ae" ng-model="selectedAE" required data-parsley-error-message="Escoge un Ejecutivo de cuenta" ng-disabled='!validSelectedProject' ng-change="selectAE( selectedAE )">
                    <option value="" disabled selected>Selecciona el ejecutivo de cuenta</option>
                    <option ng:repeat="user in accountExecutives" value="{{user.id}}">{{user.name}}</option>
                </select>
            </div>
            <div class="[ clear ]"></div>
            <div class="[ col s12 m5 offset-m1 ]"> 
                <div class="input-field">
                    <input id="client-name" type="text" ng-model="clientName" ng-readonly="true">
                    <label for="client-name">Cliente</label>
                </div>
            </div>
            <div class="[ col s12 m5 ]"> 
                <div class="input-field">
                    <input id="client-contact" type="text" name="clientContact" ng-model="clientContact" ng-readonly="true">
                    <label for="client-contact">Contacto cliente</label>
                </div>
            </div>
            <div class="[ col s12 m5 offset-m1 ]"> 
                <div class="input-field">
                    <input id="item-name" type="text" name="itemName" ng-model="itemName" required>
                    <label for="item-name">Nombre (alias)</label>
                </div>
            </div>
            <div class="[ col s12 m5 ]"> 
                <div class="input-field">
                    <input id="item-quantity" type="text" name="itemQuantity" ng-model="itemQuantity" required>
                    <label for="item-quantity">Cantidad</label>
                </div>
            </div>
            <div class="[ clear ]"></div>
            <div class="[ col s12 m5 offset-m1 ][ mt-10 ]"> 
                <select name="itemType" ng-model="itemType" required ng-change="updateExpirationDate( itemType )">
                    <option value="" disabled selected>Tipo de mercancía</option>
                    <option ng:repeat="it in itemTypes" value="{{it.name}}">{{it.name}}</option>
                </select>
            </div>
            <div class="[ col s12 m5 ][ mt-10 ]"> 
                <select name="itemState" ng-model="itemState">
                    <option value="" disabled selected>Estado</option>
                    <option value="1" selected>Nuevo</option>
                    <option value="2" selected>Como nuevo</option>
                    <option value="3" selected>Usado</option>
                    <option value="4" selected>Dañado</option>
                </select>
            </div>
            <div class="[ col s12 m10 offset-m1 ]"> 
                <div class="[ input-field ]">
                    <textarea id="description" class="materialize-textarea" name="description" ng-model="description" data-parsley-trigger="keyup" data-parsley-maxlength="200" data-parsley-maxlength-message = "Este campo debe contener menos de 200 caracteres."></textarea>
                    <label for="description">Descripción</label>
                </div>
            </div>
            <div class="[ clear ]"></div>
            <div class="[ col s12 m5 offset-m1 ]">    
                <label class="[ fs-12 ]" for="">Fecha de ingreso (mm/dd/aaaa)</label>
                <input class="datepicker" type="date" name="entryDate" ng-model="entryDate" required>
            </div>
            <div class="[ col s12 m5 ]">    
                <label class="[ fs-12 ][ js-expiration-date-label ]" for="">Fecha vigencia (mm/dd/aaaa)</label>
                <input class="datepicker" type="date" name="expirationDate" ng-model="validityExpirationDate">
            </div>
            <div class="[ clear ]"></div>
            <div class="[ col s12 ]"> 
                <input type="hidden" name="entry_type" value="unit">
                <div class="[ center-align ]">
                    <button class="[ waves-effect ][ btn ]" >Solicitar entrada</button>
                </div>
            </div>
        </form>
    </div><!-- row -->
</div><!-- step 1 Captura -->

<script>
  $('[data-parsley-entry]').parsley();
</script>





